<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gestionale Ordini</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;500;600;700;800&family=DM+Mono:wght@300;400;500&display=swap" rel="stylesheet">

<!-- Firebase -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getFirestore, collection, addDoc, updateDoc, deleteDoc, doc, onSnapshot, query, orderBy } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDIe3Wpg4pGPamkwl5X65am38pDImObX0Y",
    authDomain: "activitystorage-f0589.firebaseapp.com",
    projectId: "activitystorage-f0589",
    storageBucket: "activitystorage-f0589.firebasestorage.app",
    messagingSenderId: "987340237176",
    appId: "1:987340237176:web:d1f9f96c0596f35c4bc08d"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  window._db = db;
  window._firebase = { collection, addDoc, updateDoc, deleteDoc, doc, onSnapshot, query, orderBy };
  window._firebaseReady = true;
  window.dispatchEvent(new Event('firebaseReady'));
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.2/babel.min.js"></script>

<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
  :root {
    --bg: #0a0a0f; --bg2: #111118; --bg3: #1a1a24; --card: #14141e;
    --border: #252535; --accent: #c9a84c; --accent2: #e8c96a;
    --green: #4caf82; --red: #e05252; --blue: #4c7dcf; --purple: #8b5cf6;
    --text: #e8e8f0; --text2: #9090a8; --text3: #60607a;
    --radius: 12px; --radius-sm: 8px;
  }
  body { background: var(--bg); color: var(--text); font-family: 'Syne', sans-serif; min-height: 100vh; overflow-x: hidden; }
  body::before {
    content: ''; position: fixed; inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.05'/%3E%3C/svg%3E");
    pointer-events: none; z-index: 9999; opacity: 0.4;
  }
  .layout { display: flex; height: 100vh; }
  .sidebar { width: 240px; background: var(--bg2); border-right: 1px solid var(--border); display: flex; flex-direction: column; padding: 28px 0; flex-shrink: 0; position: relative; }
  .sidebar::after { content: ''; position: absolute; right: 0; top: 0; bottom: 0; width: 1px; background: linear-gradient(to bottom, transparent, var(--accent), transparent); opacity: 0.3; }
  .logo { padding: 0 24px 32px; border-bottom: 1px solid var(--border); }
  .logo-mark { font-size: 11px; font-family: 'DM Mono', monospace; color: var(--accent); letter-spacing: 4px; text-transform: uppercase; margin-bottom: 6px; }
  .logo h1 { font-size: 22px; font-weight: 800; color: var(--text); line-height: 1; display: flex; align-items: center; gap: 8px; }
  .logo h1 em { color: var(--accent); font-style: normal; }
  .sync-dot { display: inline-block; width: 8px; height: 8px; border-radius: 50%; background: var(--green); animation: pulse 2s infinite; flex-shrink: 0; }
  .sync-dot.offline { background: var(--red); animation: none; }
  @keyframes pulse { 0%,100%{opacity:1}50%{opacity:0.4} }
  .nav { padding: 20px 16px; flex: 1; }
  .nav-section { font-size: 10px; letter-spacing: 3px; color: var(--text3); text-transform: uppercase; font-family: 'DM Mono', monospace; padding: 0 8px; margin: 16px 0 8px; }
  .nav-item { display: flex; align-items: center; gap: 12px; padding: 11px 16px; border-radius: var(--radius-sm); cursor: pointer; transition: all 0.2s; color: var(--text2); font-size: 14px; font-weight: 500; border: 1px solid transparent; margin-bottom: 2px; }
  .nav-item:hover { background: var(--bg3); color: var(--text); }
  .nav-item.active { background: rgba(201,168,76,0.12); color: var(--accent); border-color: rgba(201,168,76,0.2); }
  .nav-item .icon { font-size: 16px; width: 20px; text-align: center; }
  .nav-badge { margin-left: auto; background: var(--accent); color: var(--bg); font-size: 10px; font-weight: 700; padding: 2px 7px; border-radius: 20px; font-family: 'DM Mono', monospace; }
  .main { flex: 1; overflow-y: auto; padding: 32px 36px; background: var(--bg); }
  .main::-webkit-scrollbar { width: 6px; }
  .main::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
  .page-header { display: flex; align-items: flex-start; justify-content: space-between; margin-bottom: 32px; flex-wrap: wrap; gap: 12px; }
  .page-title { font-size: 28px; font-weight: 800; color: var(--text); line-height: 1; }
  .page-subtitle { font-size: 13px; color: var(--text2); margin-top: 6px; font-family: 'DM Mono', monospace; }
  .btn { display: inline-flex; align-items: center; gap: 8px; padding: 10px 20px; border-radius: var(--radius-sm); font-family: 'Syne', sans-serif; font-size: 13px; font-weight: 600; cursor: pointer; border: none; transition: all 0.2s; }
  .btn:disabled { opacity: 0.5; cursor: not-allowed; }
  .btn-primary { background: var(--accent); color: var(--bg); }
  .btn-primary:hover:not(:disabled) { background: var(--accent2); transform: translateY(-1px); box-shadow: 0 4px 20px rgba(201,168,76,0.3); }
  .btn-ghost { background: transparent; color: var(--text2); border: 1px solid var(--border); }
  .btn-ghost:hover:not(:disabled) { background: var(--bg3); color: var(--text); }
  .btn-danger { background: rgba(224,82,82,0.15); color: var(--red); border: 1px solid rgba(224,82,82,0.3); }
  .btn-danger:hover:not(:disabled) { background: rgba(224,82,82,0.25); }
  .btn-sm { padding: 6px 12px; font-size: 12px; }
  .kpi-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 28px; }
  .kpi-card { background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); padding: 20px; position: relative; overflow: hidden; transition: border-color 0.2s; }
  .kpi-card:hover { border-color: var(--accent); }
  .kpi-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px; }
  .kpi-card.gold::before { background: linear-gradient(90deg, var(--accent), transparent); }
  .kpi-card.green::before { background: linear-gradient(90deg, var(--green), transparent); }
  .kpi-card.red::before { background: linear-gradient(90deg, var(--red), transparent); }
  .kpi-card.blue::before { background: linear-gradient(90deg, var(--blue), transparent); }
  .kpi-label { font-size: 10px; letter-spacing: 2.5px; text-transform: uppercase; color: var(--text3); font-family: 'DM Mono', monospace; margin-bottom: 12px; }
  .kpi-value { font-size: 28px; font-weight: 800; line-height: 1; margin-bottom: 8px; }
  .kpi-value.gold { color: var(--accent); }
  .kpi-value.green { color: var(--green); }
  .kpi-value.red { color: var(--red); }
  .kpi-sub { font-size: 11px; color: var(--text3); font-family: 'DM Mono', monospace; }
  .kpi-icon { position: absolute; right: 16px; top: 16px; font-size: 28px; opacity: 0.12; }
  .table-container { background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); overflow: hidden; }
  .table-toolbar { padding: 16px 20px; border-bottom: 1px solid var(--border); display: flex; align-items: center; gap: 12px; flex-wrap: wrap; }
  .search-box { display: flex; align-items: center; gap: 8px; background: var(--bg3); border: 1px solid var(--border); border-radius: var(--radius-sm); padding: 8px 14px; flex: 1; min-width: 180px; }
  .search-box input { background: none; border: none; color: var(--text); font-family: 'Syne', sans-serif; font-size: 13px; outline: none; width: 100%; }
  .search-box input::placeholder { color: var(--text3); }
  .filter-select { background: var(--bg3); border: 1px solid var(--border); color: var(--text2); font-family: 'Syne', sans-serif; font-size: 12px; padding: 8px 12px; border-radius: var(--radius-sm); outline: none; cursor: pointer; }
  table { width: 100%; border-collapse: collapse; }
  thead { background: var(--bg3); border-bottom: 1px solid var(--border); }
  th { padding: 12px 20px; text-align: left; font-size: 10px; letter-spacing: 2px; text-transform: uppercase; color: var(--text3); font-family: 'DM Mono', monospace; font-weight: 500; white-space: nowrap; }
  td { padding: 14px 20px; font-size: 13px; border-bottom: 1px solid rgba(37,37,53,0.6); color: var(--text); vertical-align: middle; }
  tr:last-child td { border-bottom: none; }
  tr:hover td { background: rgba(255,255,255,0.02); }
  .status-badge { display: inline-flex; align-items: center; gap: 5px; padding: 4px 10px; border-radius: 20px; font-size: 11px; font-weight: 600; font-family: 'DM Mono', monospace; white-space: nowrap; }
  .status-badge::before { content: ''; width: 5px; height: 5px; border-radius: 50%; background: currentColor; flex-shrink: 0; }
  .s-nuovo { background: rgba(76,125,207,0.15); color: var(--blue); }
  .s-lavorazione { background: rgba(201,168,76,0.15); color: var(--accent); }
  .s-spedito { background: rgba(139,92,246,0.15); color: var(--purple); }
  .s-consegnato { background: rgba(76,175,130,0.15); color: var(--green); }
  .s-annullato { background: rgba(224,82,82,0.15); color: var(--red); }
  .amount-pos { color: var(--green); font-family: 'DM Mono', monospace; font-weight: 500; }
  .amount-neg { color: var(--red); font-family: 'DM Mono', monospace; font-weight: 500; }
  .text-mono { font-family: 'DM Mono', monospace; }
  .action-btns { display: flex; gap: 6px; }
  .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.75); backdrop-filter: blur(6px); z-index: 1000; display: flex; align-items: center; justify-content: center; padding: 24px; animation: fadeIn 0.15s ease; }
  @keyframes fadeIn { from{opacity:0}to{opacity:1} }
  .modal { background: var(--card); border: 1px solid var(--border); border-radius: 16px; padding: 32px; width: 100%; max-width: 540px; animation: slideUp 0.2s ease; max-height: 90vh; overflow-y: auto; }
  @keyframes slideUp { from{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1} }
  .modal h2 { font-size: 20px; font-weight: 700; margin-bottom: 6px; }
  .modal-sub { font-size: 12px; color: var(--text3); font-family: 'DM Mono', monospace; margin-bottom: 28px; }
  .modal::-webkit-scrollbar { width: 4px; }
  .modal::-webkit-scrollbar-thumb { background: var(--border); border-radius: 2px; }
  .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
  .form-group { display: flex; flex-direction: column; gap: 6px; }
  .form-group.full { grid-column: 1/-1; }
  .form-label { font-size: 10px; letter-spacing: 2px; text-transform: uppercase; color: var(--text3); font-family: 'DM Mono', monospace; }
  .form-input, .form-select, .form-textarea { background: var(--bg3); border: 1px solid var(--border); color: var(--text); font-family: 'Syne', sans-serif; font-size: 13px; padding: 10px 14px; border-radius: var(--radius-sm); outline: none; transition: border-color 0.2s; width: 100%; }
  .form-input:focus, .form-select:focus, .form-textarea:focus { border-color: var(--accent); }
  .form-textarea { resize: vertical; min-height: 80px; }
  .form-actions { display: flex; justify-content: flex-end; gap: 10px; margin-top: 24px; padding-top: 20px; border-top: 1px solid var(--border); }
  .fin-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 24px; }
  .fin-card { background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); padding: 24px; }
  .fin-card h3 { font-size: 12px; letter-spacing: 2px; text-transform: uppercase; color: var(--text3); font-family: 'DM Mono', monospace; margin-bottom: 16px; }
  .empty-state { text-align: center; padding: 60px 20px; color: var(--text3); }
  .empty-state .icon { font-size: 40px; margin-bottom: 16px; opacity: 0.5; }
  .empty-state p { font-size: 14px; }
  .mini-bar-row { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; }
  .mini-bar-label { font-size: 11px; color: var(--text2); font-family: 'DM Mono', monospace; width: 80px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
  .mini-bar-track { flex: 1; height: 6px; background: var(--bg3); border-radius: 3px; overflow: hidden; }
  .mini-bar-fill { height: 100%; border-radius: 3px; }
  .mini-bar-val { font-size: 11px; color: var(--text2); font-family: 'DM Mono', monospace; width: 60px; text-align: right; }
  .tag { display: inline-block; background: var(--bg3); border: 1px solid var(--border); padding: 2px 8px; border-radius: 4px; font-size: 11px; color: var(--text2); font-family: 'DM Mono', monospace; }
  .divider { height: 1px; background: var(--border); margin: 20px 0; }
  .confirm-box { background: rgba(224,82,82,0.08); border: 1px solid rgba(224,82,82,0.2); border-radius: var(--radius-sm); padding: 16px; margin-bottom: 20px; }
  .confirm-box p { font-size: 13px; color: var(--text2); line-height: 1.5; }
  .confirm-box strong { color: var(--red); }
  .loading-screen { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; gap: 16px; }
  .spinner { width: 36px; height: 36px; border: 3px solid var(--border); border-top-color: var(--accent); border-radius: 50%; animation: spin 0.8s linear infinite; }
  @keyframes spin { to { transform: rotate(360deg); } }
  .loading-text { font-size: 13px; color: var(--text3); font-family: 'DM Mono', monospace; letter-spacing: 2px; }
  @media (max-width: 900px) { .kpi-grid { grid-template-columns: repeat(2, 1fr); } .sidebar { width: 200px; } .main { padding: 20px 16px; } }
  @media (max-width: 660px) {
    .layout { flex-direction: column; height: auto; min-height: 100vh; }
    .sidebar { width: 100%; padding: 16px 0; }
    .sidebar::after { display: none; }
    .logo { padding: 0 16px 16px; }
    .nav { display: flex; flex-direction: row; padding: 8px 12px; overflow-x: auto; }
    .nav-section { display: none; }
    .nav-item { flex-direction: column; gap: 2px; padding: 8px 14px; font-size: 10px; white-space: nowrap; }
    .nav-item .icon { font-size: 18px; }
    .kpi-grid { grid-template-columns: 1fr 1fr; }
    .fin-grid { grid-template-columns: 1fr; }
    .form-grid { grid-template-columns: 1fr; }
    .form-group.full { grid-column: 1; }
    th, td { padding: 10px 12px; font-size: 12px; }
    .main { padding: 16px; }
  }
</style>
</head>
<body>
<div id="root"></div>

<script type="text/babel">
const { useState, useEffect, useMemo, useCallback, useRef } = React;

const fmt = n => `‚Ç¨ ${parseFloat(n||0).toLocaleString('it-IT', {minimumFractionDigits:2, maximumFractionDigits:2})}`;
const fmtDate = d => d ? new Date(d).toLocaleDateString('it-IT') : '‚Äî';

const STATUS_MAP = {
  nuovo:       { label: 'Nuovo',          cls: 's-nuovo' },
  lavorazione: { label: 'In Lavorazione', cls: 's-lavorazione' },
  spedito:     { label: 'Spedito',        cls: 's-spedito' },
  consegnato:  { label: 'Consegnato',     cls: 's-consegnato' },
  annullato:   { label: 'Annullato',      cls: 's-annullato' },
};

// ‚îÄ‚îÄ‚îÄ FIRESTORE HOOK ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function useFirestoreCollection(collectionName) {
  const [data, setData] = useState([]);
  const [ready, setReady] = useState(false);
  const unsubRef = useRef(null);

  useEffect(() => {
    const init = () => {
      const { collection, onSnapshot } = window._firebase;
      const db = window._db;
      unsubRef.current = onSnapshot(collection(db, collectionName), snap => {
        setData(snap.docs.map(d => ({ id: d.id, ...d.data() })));
        setReady(true);
      }, err => { console.error(err); setReady(true); });
    };
    if (window._firebaseReady) init();
    else window.addEventListener('firebaseReady', init, { once: true });
    return () => { if (unsubRef.current) unsubRef.current(); };
  }, [collectionName]);

  const add = useCallback(async item => {
    const { collection, addDoc } = window._firebase;
    await addDoc(collection(window._db, collectionName), { ...item, _ts: Date.now() });
  }, [collectionName]);

  const update = useCallback(async (id, item) => {
    const { doc, updateDoc } = window._firebase;
    await updateDoc(doc(window._db, collectionName, id), item);
  }, [collectionName]);

  const remove = useCallback(async id => {
    const { doc, deleteDoc } = window._firebase;
    await deleteDoc(doc(window._db, collectionName, id));
  }, [collectionName]);

  return { data, ready, add, update, remove };
}

// ‚îÄ‚îÄ‚îÄ MODAL ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function Modal({ open, onClose, children }) {
  if (!open) return null;
  return (
    <div className="modal-overlay" onClick={e => e.target===e.currentTarget && onClose()}>
      <div className="modal">{children}</div>
    </div>
  );
}

// ‚îÄ‚îÄ‚îÄ ORDER FORM ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function OrderForm({ initial, onSave, onClose, title, saving }) {
  const empty = { cliente:'', prodotto:'', qta:'', prezzo:'', stato:'nuovo', data: new Date().toISOString().split('T')[0], note:'', telefono:'', indirizzo:'' };
  const [f, setF] = useState(initial || empty);
  const set = k => e => setF(p=>({...p,[k]:e.target.value}));
  const save = () => { if(!f.cliente||!f.prodotto) return alert('Cliente e Prodotto obbligatori'); onSave(f); };
  return (<>
    <h2>{title||'Nuovo Ordine'}</h2>
    <div className="modal-sub">Compila i dati dell'ordine</div>
    <div className="form-grid">
      <div className="form-group"><label className="form-label">Cliente *</label><input className="form-input" value={f.cliente} onChange={set('cliente')} placeholder="Nome cliente"/></div>
      <div className="form-group"><label className="form-label">Telefono</label><input className="form-input" value={f.telefono} onChange={set('telefono')} placeholder="333 1234567"/></div>
      <div className="form-group full"><label className="form-label">Prodotto / Descrizione *</label><input className="form-input" value={f.prodotto} onChange={set('prodotto')} placeholder="Descrizione prodotto o servizio"/></div>
      <div className="form-group"><label className="form-label">Quantit√†</label><input className="form-input" type="number" value={f.qta} onChange={set('qta')} placeholder="1" min="1"/></div>
      <div className="form-group"><label className="form-label">Prezzo (‚Ç¨)</label><input className="form-input" type="number" step="0.01" value={f.prezzo} onChange={set('prezzo')} placeholder="0.00"/></div>
      <div className="form-group"><label className="form-label">Stato</label>
        <select className="form-select" value={f.stato} onChange={set('stato')}>
          {Object.entries(STATUS_MAP).map(([k,v])=><option key={k} value={k}>{v.label}</option>)}
        </select>
      </div>
      <div className="form-group"><label className="form-label">Data</label><input className="form-input" type="date" value={f.data} onChange={set('data')}/></div>
      <div className="form-group full"><label className="form-label">Indirizzo Spedizione</label><input className="form-input" value={f.indirizzo} onChange={set('indirizzo')} placeholder="Via, Citt√†, CAP"/></div>
      <div className="form-group full"><label className="form-label">Note</label><textarea className="form-textarea" value={f.note} onChange={set('note')} placeholder="Note aggiuntive..."/></div>
    </div>
    <div className="form-actions">
      <button className="btn btn-ghost" onClick={onClose} disabled={saving}>Annulla</button>
      <button className="btn btn-primary" onClick={save} disabled={saving}>{saving?'‚è≥ Salvataggio...':'üíæ Salva Ordine'}</button>
    </div>
  </>);
}

// ‚îÄ‚îÄ‚îÄ MOVIMENTO FORM ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function MovimentoForm({ initial, onSave, onClose, title, saving }) {
  const empty = { tipo:'entrata', categoria:'', descrizione:'', importo:'', data: new Date().toISOString().split('T')[0], note:'' };
  const [f, setF] = useState(initial || empty);
  const set = k => e => setF(p=>({...p,[k]:e.target.value}));
  const save = () => { if(!f.descrizione||!f.importo) return alert('Descrizione e Importo obbligatori'); onSave(f); };
  const cats = f.tipo==='entrata' ? ['Vendita','Servizi','Consulenza','Rimborso','Altro'] : ['Fornitore','Spedizione','Materiali','Utenze','Tasse','Software','Altro'];
  return (<>
    <h2>{title||'Nuovo Movimento'}</h2>
    <div className="modal-sub">Registra entrata o uscita</div>
    <div className="form-grid">
      <div className="form-group"><label className="form-label">Tipo</label>
        <select className="form-select" value={f.tipo} onChange={set('tipo')}>
          <option value="entrata">‚Üò Entrata</option><option value="uscita">‚Üó Uscita</option>
        </select>
      </div>
      <div className="form-group"><label className="form-label">Categoria</label>
        <select className="form-select" value={f.categoria} onChange={set('categoria')}>
          <option value="">Seleziona...</option>{cats.map(c=><option key={c} value={c}>{c}</option>)}
        </select>
      </div>
      <div className="form-group full"><label className="form-label">Descrizione *</label><input className="form-input" value={f.descrizione} onChange={set('descrizione')} placeholder="Descrizione"/></div>
      <div className="form-group"><label className="form-label">Importo (‚Ç¨) *</label><input className="form-input" type="number" step="0.01" value={f.importo} onChange={set('importo')} placeholder="0.00"/></div>
      <div className="form-group"><label className="form-label">Data</label><input className="form-input" type="date" value={f.data} onChange={set('data')}/></div>
      <div className="form-group full"><label className="form-label">Note</label><textarea className="form-textarea" value={f.note} onChange={set('note')} placeholder="Note aggiuntive..."/></div>
    </div>
    <div className="form-actions">
      <button className="btn btn-ghost" onClick={onClose} disabled={saving}>Annulla</button>
      <button className="btn btn-primary" onClick={save} disabled={saving}>{saving?'‚è≥ Salvataggio...':'üíæ Salva'}</button>
    </div>
  </>);
}

// ‚îÄ‚îÄ‚îÄ DASHBOARD ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function Dashboard({ orders, movimenti }) {
  const totEntrate = movimenti.filter(m=>m.tipo==='entrata').reduce((s,m)=>s+parseFloat(m.importo||0),0);
  const totUscite  = movimenti.filter(m=>m.tipo==='uscita').reduce((s,m)=>s+parseFloat(m.importo||0),0);
  const saldo = totEntrate - totUscite;
  const totAttivi = orders.filter(o=>!['consegnato','annullato'].includes(o.stato)).length;
  const recent = [...orders].sort((a,b)=>(b._ts||0)-(a._ts||0)).slice(0,5);
  const statusCount = {};
  orders.forEach(o=>{statusCount[o.stato]=(statusCount[o.stato]||0)+1;});
  const clientiMap = {};
  orders.forEach(o=>{if(o.cliente) clientiMap[o.cliente]=(clientiMap[o.cliente]||0)+parseFloat(o.prezzo||0)*parseFloat(o.qta||1);});
  const topClienti = Object.entries(clientiMap).sort((a,b)=>b[1]-a[1]).slice(0,5);
  const maxVal = topClienti[0]?.[1]||1;

  return (<div>
    <div className="page-header">
      <div>
        <div className="page-title">Dashboard</div>
        <div className="page-subtitle">{new Date().toLocaleDateString('it-IT',{weekday:'long',year:'numeric',month:'long',day:'numeric'})}</div>
      </div>
    </div>
    <div className="kpi-grid">
      <div className="kpi-card gold"><div className="kpi-icon">üìã</div><div className="kpi-label">Totale Ordini</div><div className="kpi-value gold">{orders.length}</div><div className="kpi-sub">{totAttivi} attivi</div></div>
      <div className="kpi-card green"><div className="kpi-icon">üí∞</div><div className="kpi-label">Entrate</div><div className="kpi-value green">{fmt(totEntrate)}</div><div className="kpi-sub">{movimenti.filter(m=>m.tipo==='entrata').length} movimenti</div></div>
      <div className="kpi-card red"><div className="kpi-icon">üì§</div><div className="kpi-label">Uscite</div><div className="kpi-value red">{fmt(totUscite)}</div><div className="kpi-sub">{movimenti.filter(m=>m.tipo==='uscita').length} movimenti</div></div>
      <div className="kpi-card blue"><div className="kpi-icon">‚öñ</div><div className="kpi-label">Saldo Netto</div><div className={`kpi-value ${saldo>=0?'green':'red'}`}>{fmt(saldo)}</div><div className="kpi-sub">{saldo>=0?'in attivo':'in passivo'}</div></div>
    </div>
    <div style={{display:'grid',gridTemplateColumns:'1fr 1fr',gap:'16px'}}>
      <div className="table-container">
        <div className="table-toolbar" style={{justifyContent:'space-between'}}>
          <span style={{fontSize:'13px',fontWeight:'700'}}>Ordini Recenti</span>
          <span className="tag">ultime 5</span>
        </div>
        {recent.length===0 ? <div className="empty-state"><div className="icon">üì¶</div><p>Nessun ordine ancora</p></div> : (
          <table><thead><tr><th>Cliente</th><th>Prodotto</th><th>Totale</th><th>Stato</th></tr></thead>
          <tbody>{recent.map(o=>(
            <tr key={o.id}>
              <td style={{fontWeight:'600'}}>{o.cliente}</td>
              <td style={{color:'var(--text2)',maxWidth:'110px',overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap'}}>{o.prodotto}</td>
              <td className="amount-pos">{fmt(parseFloat(o.prezzo||0)*parseFloat(o.qta||1))}</td>
              <td><span className={`status-badge ${STATUS_MAP[o.stato]?.cls}`}>{STATUS_MAP[o.stato]?.label}</span></td>
            </tr>
          ))}</tbody></table>
        )}
      </div>
      <div className="fin-card" style={{padding:'20px'}}>
        <h3>Top Clienti per Valore</h3>
        {topClienti.length===0 ? <div style={{color:'var(--text3)',fontSize:'13px',textAlign:'center',padding:'20px'}}>Nessun dato</div>
        : topClienti.map(([name,val])=>(
          <div key={name} className="mini-bar-row">
            <div className="mini-bar-label">{name}</div>
            <div className="mini-bar-track"><div className="mini-bar-fill" style={{width:`${(val/maxVal)*100}%`,background:'var(--accent)'}}></div></div>
            <div className="mini-bar-val">{fmt(val)}</div>
          </div>
        ))}
        {orders.length>0 && <>
          <div className="divider"></div>
          <div style={{display:'grid',gridTemplateColumns:'repeat(3,1fr)',gap:'8px'}}>
            {Object.entries(STATUS_MAP).map(([k,v])=>(
              <div key={k} style={{textAlign:'center'}}>
                <div style={{fontSize:'20px',fontWeight:'800',color:k==='consegnato'?'var(--green)':k==='annullato'?'var(--red)':'var(--text)'}}>{statusCount[k]||0}</div>
                <div style={{fontSize:'9px',color:'var(--text3)',fontFamily:'DM Mono,monospace',letterSpacing:'1px',textTransform:'uppercase'}}>{v.label}</div>
              </div>
            ))}
          </div>
        </>}
      </div>
    </div>
  </div>);
}

// ‚îÄ‚îÄ‚îÄ ORDINI PAGE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function OrdiniPage({ col }) {
  const { data: orders, add, update, remove } = col;
  const [modal, setModal] = useState(null);
  const [selected, setSelected] = useState(null);
  const [search, setSearch] = useState('');
  const [filterStato, setFilterStato] = useState('');
  const [saving, setSaving] = useState(false);

  const filtered = useMemo(()=>orders.filter(o=>{
    const s=search.toLowerCase();
    return (!s||o.cliente?.toLowerCase().includes(s)||o.prodotto?.toLowerCase().includes(s))&&(!filterStato||o.stato===filterStato);
  }).sort((a,b)=>(b._ts||0)-(a._ts||0)),[orders,search,filterStato]);

  const saveOrder = async f => {
    setSaving(true);
    try { if(modal==='new') await add(f); else await update(selected.id,f); setModal(null); }
    catch(e){ alert('Errore: '+e.message); }
    setSaving(false);
  };

  const deleteOrder = async () => {
    setSaving(true);
    try { await remove(selected.id); setModal(null); }
    catch(e){ alert('Errore: '+e.message); }
    setSaving(false);
  };

  const totale = filtered.reduce((s,o)=>s+parseFloat(o.prezzo||0)*parseFloat(o.qta||1),0);

  return (<div>
    <div className="page-header">
      <div>
        <div className="page-title">Ordini</div>
        <div className="page-subtitle">{filtered.length} ordini ‚Ä¢ Totale: {fmt(totale)}</div>
      </div>
      <button className="btn btn-primary" onClick={()=>{setSelected(null);setModal('new')}}>+ Nuovo Ordine</button>
    </div>
    <div className="table-container">
      <div className="table-toolbar">
        <div className="search-box"><span style={{color:'var(--text3)'}}>‚åï</span><input value={search} onChange={e=>setSearch(e.target.value)} placeholder="Cerca cliente o prodotto..."/></div>
        <select className="filter-select" value={filterStato} onChange={e=>setFilterStato(e.target.value)}>
          <option value="">Tutti gli stati</option>
          {Object.entries(STATUS_MAP).map(([k,v])=><option key={k} value={k}>{v.label}</option>)}
        </select>
      </div>
      {filtered.length===0 ? <div className="empty-state"><div className="icon">üì¶</div><p>Nessun ordine trovato</p></div> : (
        <div style={{overflowX:'auto'}}>
        <table><thead><tr><th>#</th><th>Cliente</th><th>Prodotto</th><th>Qt√†</th><th>Prezzo</th><th>Totale</th><th>Stato</th><th>Data</th><th>Azioni</th></tr></thead>
        <tbody>{filtered.map((o,i)=>(
          <tr key={o.id}>
            <td><span className="tag text-mono">{String(i+1).padStart(3,'0')}</span></td>
            <td><div style={{fontWeight:'600'}}>{o.cliente}</div>{o.telefono&&<div style={{fontSize:'11px',color:'var(--text3)',fontFamily:'DM Mono,monospace'}}>{o.telefono}</div>}</td>
            <td style={{maxWidth:'150px'}}><div style={{overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap'}}>{o.prodotto}</div>{o.note&&<div style={{fontSize:'11px',color:'var(--text3)',overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap'}}>{o.note}</div>}</td>
            <td className="text-mono" style={{color:'var(--text2)'}}>{o.qta||1}</td>
            <td className="text-mono">{fmt(o.prezzo)}</td>
            <td className="amount-pos">{fmt(parseFloat(o.prezzo||0)*parseFloat(o.qta||1))}</td>
            <td><span className={`status-badge ${STATUS_MAP[o.stato]?.cls}`}>{STATUS_MAP[o.stato]?.label}</span></td>
            <td className="text-mono" style={{color:'var(--text3)',fontSize:'12px'}}>{fmtDate(o.data)}</td>
            <td><div className="action-btns">
              <button className="btn btn-ghost btn-sm" onClick={()=>{setSelected(o);setModal('edit')}}>‚úé</button>
              <button className="btn btn-danger btn-sm" onClick={()=>{setSelected(o);setModal('delete')}}>‚å´</button>
            </div></td>
          </tr>
        ))}</tbody></table>
        </div>
      )}
    </div>
    <Modal open={modal==='new'||modal==='edit'} onClose={()=>setModal(null)}>
      <OrderForm initial={selected} onSave={saveOrder} onClose={()=>setModal(null)} title={modal==='new'?'Nuovo Ordine':'Modifica Ordine'} saving={saving}/>
    </Modal>
    <Modal open={modal==='delete'} onClose={()=>setModal(null)}>
      <h2>Elimina Ordine</h2><div className="modal-sub">Questa azione non pu√≤ essere annullata</div>
      <div className="confirm-box"><p>Elimina ordine di <strong>{selected?.cliente}</strong> ‚Äî <strong>{selected?.prodotto}</strong>?</p></div>
      <div className="form-actions">
        <button className="btn btn-ghost" onClick={()=>setModal(null)} disabled={saving}>Annulla</button>
        <button className="btn btn-danger" onClick={deleteOrder} disabled={saving}>{saving?'‚è≥...':'‚å´ Elimina'}</button>
      </div>
    </Modal>
  </div>);
}

// ‚îÄ‚îÄ‚îÄ FINANZA PAGE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function FinanzaPage({ col }) {
  const { data: movimenti, add, update, remove } = col;
  const [modal, setModal] = useState(null);
  const [selected, setSelected] = useState(null);
  const [search, setSearch] = useState('');
  const [filterTipo, setFilterTipo] = useState('');
  const [saving, setSaving] = useState(false);

  const totEntrate = movimenti.filter(m=>m.tipo==='entrata').reduce((s,m)=>s+parseFloat(m.importo||0),0);
  const totUscite  = movimenti.filter(m=>m.tipo==='uscita').reduce((s,m)=>s+parseFloat(m.importo||0),0);
  const saldo = totEntrate - totUscite;

  const filtered = useMemo(()=>movimenti.filter(m=>{
    const s=search.toLowerCase();
    return(!s||m.descrizione?.toLowerCase().includes(s)||m.categoria?.toLowerCase().includes(s))&&(!filterTipo||m.tipo===filterTipo);
  }).sort((a,b)=>(b._ts||0)-(a._ts||0)),[movimenti,search,filterTipo]);

  const saveMov = async f => {
    setSaving(true);
    try { if(modal==='new') await add(f); else await update(selected.id,f); setModal(null); }
    catch(e){ alert('Errore: '+e.message); }
    setSaving(false);
  };

  const deleteMov = async () => {
    setSaving(true);
    try { await remove(selected.id); setModal(null); }
    catch(e){ alert('Errore: '+e.message); }
    setSaving(false);
  };

  return (<div>
    <div className="page-header">
      <div>
        <div className="page-title">Finanza</div>
        <div className="page-subtitle">Saldo netto: {fmt(saldo)}</div>
      </div>
      <button className="btn btn-primary" onClick={()=>{setSelected(null);setModal('new')}}>+ Nuovo Movimento</button>
    </div>
    <div className="fin-grid">
      <div className="fin-card" style={{borderColor:'rgba(76,175,130,0.3)'}}>
        <h3>‚Üò Entrate Totali</h3>
        <div style={{fontSize:'32px',fontWeight:'800',color:'var(--green)',marginBottom:'8px'}}>{fmt(totEntrate)}</div>
        <div style={{fontSize:'12px',color:'var(--text3)',fontFamily:'DM Mono,monospace'}}>{movimenti.filter(m=>m.tipo==='entrata').length} movimenti</div>
      </div>
      <div className="fin-card" style={{borderColor:'rgba(224,82,82,0.3)'}}>
        <h3>‚Üó Uscite Totali</h3>
        <div style={{fontSize:'32px',fontWeight:'800',color:'var(--red)',marginBottom:'8px'}}>{fmt(totUscite)}</div>
        <div style={{fontSize:'12px',color:'var(--text3)',fontFamily:'DM Mono,monospace'}}>{movimenti.filter(m=>m.tipo==='uscita').length} movimenti</div>
      </div>
    </div>
    <div className="table-container">
      <div className="table-toolbar">
        <div className="search-box"><span style={{color:'var(--text3)'}}>‚åï</span><input value={search} onChange={e=>setSearch(e.target.value)} placeholder="Cerca descrizione o categoria..."/></div>
        <select className="filter-select" value={filterTipo} onChange={e=>setFilterTipo(e.target.value)}>
          <option value="">Tutti</option><option value="entrata">‚Üò Entrate</option><option value="uscita">‚Üó Uscite</option>
        </select>
      </div>
      {filtered.length===0 ? <div className="empty-state"><div className="icon">üí∞</div><p>Nessun movimento trovato</p></div> : (
        <div style={{overflowX:'auto'}}>
        <table><thead><tr><th>Tipo</th><th>Descrizione</th><th>Categoria</th><th>Importo</th><th>Data</th><th>Note</th><th>Azioni</th></tr></thead>
        <tbody>{filtered.map(m=>(
          <tr key={m.id}>
            <td>{m.tipo==='entrata'?<span className="status-badge s-consegnato">‚Üò Entrata</span>:<span className="status-badge s-annullato">‚Üó Uscita</span>}</td>
            <td style={{fontWeight:'500'}}>{m.descrizione}</td>
            <td>{m.categoria&&<span className="tag">{m.categoria}</span>}</td>
            <td className={m.tipo==='entrata'?'amount-pos':'amount-neg'}>{m.tipo==='entrata'?'+':'-'}{fmt(m.importo)}</td>
            <td className="text-mono" style={{color:'var(--text3)',fontSize:'12px'}}>{fmtDate(m.data)}</td>
            <td style={{color:'var(--text3)',fontSize:'12px',maxWidth:'120px',overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap'}}>{m.note||'‚Äî'}</td>
            <td><div className="action-btns">
              <button className="btn btn-ghost btn-sm" onClick={()=>{setSelected(m);setModal('edit')}}>‚úé</button>
              <button className="btn btn-danger btn-sm" onClick={()=>{setSelected(m);setModal('delete')}}>‚å´</button>
            </div></td>
          </tr>
        ))}</tbody></table>
        </div>
      )}
    </div>
    <Modal open={modal==='new'||modal==='edit'} onClose={()=>setModal(null)}>
      <MovimentoForm initial={selected} onSave={saveMov} onClose={()=>setModal(null)} title={modal==='new'?'Nuovo Movimento':'Modifica Movimento'} saving={saving}/>
    </Modal>
    <Modal open={modal==='delete'} onClose={()=>setModal(null)}>
      <h2>Elimina Movimento</h2><div className="modal-sub">Questa azione non pu√≤ essere annullata</div>
      <div className="confirm-box"><p>Elimina: <strong>{selected?.descrizione}</strong> ‚Äî {fmt(selected?.importo)}?</p></div>
      <div className="form-actions">
        <button className="btn btn-ghost" onClick={()=>setModal(null)} disabled={saving}>Annulla</button>
        <button className="btn btn-danger" onClick={deleteMov} disabled={saving}>{saving?'‚è≥...':'‚å´ Elimina'}</button>
      </div>
    </Modal>
  </div>);
}

// ‚îÄ‚îÄ‚îÄ APP ROOT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function App() {
  const ordersCol    = useFirestoreCollection('ordini');
  const movimentiCol = useFirestoreCollection('movimenti');
  const [page, setPage] = useState('dashboard');
  const [online, setOnline] = useState(navigator.onLine);

  useEffect(()=>{
    const up=()=>setOnline(true), dn=()=>setOnline(false);
    window.addEventListener('online',up); window.addEventListener('offline',dn);
    return()=>{ window.removeEventListener('online',up); window.removeEventListener('offline',dn); };
  },[]);

  if (!ordersCol.ready || !movimentiCol.ready) {
    return (<div className="loading-screen">
      <div className="spinner"></div>
      <div className="loading-text">CONNESSIONE A FIREBASE...</div>
    </div>);
  }

  const totAttivi = ordersCol.data.filter(o=>!['consegnato','annullato'].includes(o.stato)).length;
  const navItems = [
    { id:'dashboard', icon:'‚óà', label:'Dashboard' },
    { id:'ordini',    icon:'üìã', label:'Ordini', badge: totAttivi||null },
    { id:'finanza',   icon:'üí∞', label:'Finanza' },
  ];

  return (
    <div className="layout">
      <aside className="sidebar">
        <div className="logo">
          <div className="logo-mark">Sistema</div>
          <h1>Gestionale<em>.</em><span className={`sync-dot ${online?'':'offline'}`} title={online?'Sincronizzato con Firebase':'Offline'}></span></h1>
        </div>
        <nav className="nav">
          <div className="nav-section">Menu</div>
          {navItems.map(n=>(
            <div key={n.id} className={`nav-item ${page===n.id?'active':''}`} onClick={()=>setPage(n.id)}>
              <span className="icon">{n.icon}</span>{n.label}
              {n.badge?<span className="nav-badge">{n.badge}</span>:null}
            </div>
          ))}
        </nav>
        <div style={{padding:'16px 24px',borderTop:'1px solid var(--border)'}}>
          <div style={{fontSize:'10px',color:'var(--text3)',fontFamily:'DM Mono,monospace',letterSpacing:'1px',lineHeight:'1.8'}}>
            ORDINI TOTALI<br/>
            <span style={{color:'var(--accent)',fontSize:'18px',fontWeight:'800'}}>{ordersCol.data.length}</span>
          </div>
          <div style={{fontSize:'9px',color:online?'var(--green)':'var(--red)',fontFamily:'DM Mono,monospace',marginTop:'4px',letterSpacing:'1px'}}>
            {online?'‚óè FIREBASE LIVE':'‚óè OFFLINE'}
          </div>
        </div>
      </aside>
      <main className="main">
        {page==='dashboard' && <Dashboard orders={ordersCol.data} movimenti={movimentiCol.data}/>}
        {page==='ordini'    && <OrdiniPage col={ordersCol}/>}
        {page==='finanza'   && <FinanzaPage col={movimentiCol}/>}
      </main>
    </div>
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(<App/>);
</script>
</body>
</html>
